{% extends 'patients/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="content-section" data-reveal>
    <h2 class="section-title">Overview</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <i class="fas fa-users"></i>
            <div class="stat-info">
                <h3>Total Patients</h3>
                <p>{{ total_patients }}</p>
            </div>
        </div>
        <div class="stat-card">
            <i class="fas fa-calendar-check"></i>
            <div class="stat-info">
                <h3>Today's Appointments</h3>
                <p>{{ today_appointments }}</p>
            </div>
        </div>
        <div class="stat-card">
            <i class="fas fa-exclamation-circle"></i>
            <div class="stat-info">
                <h3>Patient Alerts</h3>
                <p>5</p>
            </div>
        </div>
    </div>

    <!-- Today's Schedule Section -->
    <div class="schedule-section">
        <h3 class="sub-title">Today's Schedule</h3>
        <div class="schedule-timeline">
            <div class="timeline-item">
                <div class="time">09:00 AM</div>
                <div class="appointment-details">
                    <h4>John Smith</h4>
                    <p>Regular Checkup</p>
                </div>
                <span class="status-badge pending">Pending</span>
            </div>
            <div class="timeline-item">
                <div class="time">10:30 AM</div>
                <div class="appointment-details">
                    <h4>Sarah Johnson</h4>
                    <p>Follow-up Visit</p>
                </div>
                <span class="status-badge completed">Completed</span>
            </div>
            <div class="timeline-item">
                <div class="time">02:00 PM</div>
                <div class="appointment-details">
                    <h4>Mike Davis</h4>
                    <p>Blood Test Results</p>
                </div>
                <span class="status-badge pending">Pending</span>
            </div>
        </div>
    </div>
</div>

<!-- Patient Alerts Section -->
<div class="content-section" data-reveal>
    <h2 class="section-title">Patient Alerts</h2>
    <div class="alerts-list">
        <div class="alert-card urgent">
            <i class="fas fa-exclamation-triangle"></i>
            <div class="alert-info">
                <h4>High Blood Pressure Alert</h4>
                <p>Patient: Robert Wilson</p>
                <p class="alert-time">2 hours ago</p>
            </div>
        </div>
        <div class="alert-card warning">
            <i class="fas fa-exclamation-circle"></i>
            <div class="alert-info">
                <h4>Medication Reminder</h4>
                <p>Patient: Emily Brown</p>
                <p class="alert-time">4 hours ago</p>
            </div>
        </div>
        <div class="alert-card info">
            <i class="fas fa-info-circle"></i>
            <div class="alert-info">
                <h4>Lab Results Available</h4>
                <p>Patient: James Anderson</p>
                <p class="alert-time">6 hours ago</p>
            </div>
        </div>
    </div>
</div>

<!-- Recent Appointments Section -->
<div class="content-section" data-reveal>
    <h2 class="section-title">Recent Appointments</h2>
    <div class="appointments-list">
        {% for appointment in recent_appointments %}
        <div class="appointment-card">
            <div class="appointment-info">
                <h4>{{ appointment.patient.first_name }} {{ appointment.patient.last_name }}</h4>
                <p>{{ appointment.date }} at {{ appointment.time }}</p>
            </div>
            <span class="status-badge {{ appointment.status|lower }}">
                {{ appointment.status }}
            </span>
        </div>
        {% empty %}
        <div class="appointment-card">
            <div class="appointment-info">
                <h4>Lisa Thompson</h4>
                <p>Today at 11:30 AM</p>
            </div>
            <span class="status-badge completed">Completed</span>
        </div>
        <div class="appointment-card">
            <div class="appointment-info">
                <h4>David Miller</h4>
                <p>Today at 2:15 PM</p>
            </div>
            <span class="status-badge pending">Pending</span>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Forthcoming Appointments Section -->
<div class="content-section" data-reveal>
    <h2 class="section-title">Forthcoming Appointments</h2>
    <div class="appointments-list">
        <div class="appointment-card">
            <div class="appointment-info">
                <h4>Alice Cooper</h4>
                <p>Tomorrow at 10:00 AM</p>
                <span class="appointment-type">Initial Consultation</span>
            </div>
            <span class="status-badge scheduled">Scheduled</span>
        </div>
        <div class="appointment-card">
            <div class="appointment-info">
                <h4>Tom Harris</h4>
                <p>23 May at 3:30 PM</p>
                <span class="appointment-type">Follow-up</span>
            </div>
            <span class="status-badge scheduled">Scheduled</span>
        </div>
        <div class="appointment-card">
            <div class="appointment-info">
                <h4>Susan White</h4>
                <p>24 May at 11:15 AM</p>
                <span class="appointment-type">Regular Checkup</span>
            </div>
            <span class="status-badge scheduled">Scheduled</span>
        </div>
    </div>
</div>

<style>
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: var(--white);
        padding: 1.5rem;
        border-radius: var(--radius-12);
        box-shadow: var(--shadow-2);
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: var(--transition);
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-card i {
        font-size: 2rem;
        color: var(--primary-color);
    }

    .stat-info h3 {
        font-size: 1rem;
        color: var(--text-light);
        margin-bottom: 0.5rem;
    }

    .stat-info p {
        font-size: 1.5rem;
        font-weight: 500;
        color: var(--text-dark);
    }

    .appointments-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .appointment-card {
        background: var(--white);
        padding: 1rem;
        border-radius: var(--radius-12);
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: var(--transition);
    }

    .appointment-card:hover {
        transform: translateX(5px);
        box-shadow: var(--shadow-2);
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: var(--radius-4);
        font-size: 0.875rem;
    }

    .status-badge.pending {
        background: rgba(255, 159, 28, 0.1);
        color: #ff9f1c;
    }

    .status-badge.completed {
        background: rgba(46, 196, 182, 0.1);
        color: #2ec4b6;
    }

    .no-data {
        text-align: center;
        color: var(--text-light);
        padding: 2rem;
    }

    /* Schedule Timeline Styles */
    .schedule-section {
        margin-top: 2rem;
    }

    .sub-title {
        color: var(--text-dark);
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }

    .schedule-timeline {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .timeline-item {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        background: var(--white);
        padding: 1rem;
        border-radius: var(--radius-12);
        box-shadow: var(--shadow-2);
    }

    .time {
        min-width: 100px;
        color: var(--primary-color);
        font-weight: 500;
    }

    /* Alert Styles */
    .alerts-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .alert-card {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem;
        border-radius: var(--radius-12);
        background: var(--white);
        box-shadow: var(--shadow-2);
        transition: var(--transition);
    }

    .alert-card:hover {
        transform: translateX(5px);
    }

    .alert-card i {
        font-size: 1.5rem;
    }

    .alert-card.urgent i {
        color: #e71d36;
    }

    .alert-card.warning i {
        color: #ff9f1c;
    }

    .alert-card.info i {
        color: var(--primary-color);
    }

    .alert-info h4 {
        margin-bottom: 0.25rem;
    }

    .alert-time {
        font-size: 0.875rem;
        color: var(--text-light);
        margin-top: 0.25rem;
    }

    /* Appointment Type Badge */
    .appointment-type {
        display: inline-block;
        font-size: 0.875rem;
        color: var(--text-light);
        margin-top: 0.5rem;
    }

    .status-badge.scheduled {
        background: rgba(46, 196, 182, 0.1);
        color: #2ec4b6;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .timeline-item {
            flex-direction: column;
            align-items: flex-start;
        }

        .time {
            margin-bottom: 0.5rem;
        }
    }
</style>
{% endblock %} 